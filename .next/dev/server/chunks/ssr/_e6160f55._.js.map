{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bernie%20Mar%20Malabunga/Documents/GitHub/seating-tracker/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bernie%20Mar%20Malabunga/Documents/GitHub/seating-tracker/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bernie%20Mar%20Malabunga/Documents/GitHub/seating-tracker/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      data-slot=\"input\"\r\n      className={cn(\r\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\r\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\r\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bernie%20Mar%20Malabunga/Documents/GitHub/seating-tracker/lib/venue-map-service.ts"],"sourcesContent":["import { firestore } from \"./firebase\"\r\nimport { doc, setDoc, getDoc, Timestamp } from \"firebase/firestore\"\r\n\r\nexport interface VenueNode {\r\n  id: string\r\n  x: number\r\n  y: number\r\n  type:\r\n    | \"entrance\"\r\n    | \"table\"\r\n    | \"vip-table\"\r\n    | \"buffet\"\r\n    | \"carving-table\"\r\n    | \"photo-exhibit\"\r\n    | \"crying-room\"\r\n    | \"stage\"\r\n    | \"custom\"\r\n    | \"edge-node\" // Added edge-node type for manual pathfinding waypoints\r\n    | \"waypoint\"\r\n    | \"intersection\"\r\n  label: string\r\n  description?: string\r\n  customLabel?: string\r\n  seats?: number\r\n  capacity?: number\r\n  groupId?: string\r\n  createdAt: Date\r\n  updatedAt: Date\r\n}\r\n\r\nexport interface NodeGroup {\r\n  id: string\r\n  name: string\r\n  color: string\r\n  nodeIds: string[]\r\n}\r\n\r\nexport interface LayoutTemplate {\r\n  id: string\r\n  name: string\r\n  description: string\r\n  nodes: Omit<VenueNode, \"createdAt\" | \"updatedAt\">[]\r\n  groups?: NodeGroup[]\r\n}\r\n\r\nexport interface VenueMap {\r\n  id: string\r\n  name: string\r\n  imageUrl: string\r\n  customImageUrl?: string\r\n  backgroundOpacity?: number\r\n  width: number\r\n  height: number\r\n  defaultZoom?: number\r\n  defaultCenter?: { x: number; y: number }\r\n  nodes: VenueNode[]\r\n  groups?: NodeGroup[]\r\n  createdAt: Date\r\n  updatedAt: Date\r\n}\r\n\r\nexport const LAYOUT_TEMPLATES: LayoutTemplate[] = [\r\n  {\r\n    id: \"standard-tables\",\r\n    name: \"Standard Table Layout\",\r\n    description: \"40 tables arranged in a grid with center aisle\",\r\n    nodes: Array.from({ length: 40 }, (_, i) => {\r\n      const col = i % 8\r\n      const row = Math.floor(i / 8)\r\n      const xOffset = col >= 4 ? 100 : 0 // Center aisle\r\n      return {\r\n        id: `table-${i + 1}`,\r\n        x: 150 + col * 120 + xOffset,\r\n        y: 200 + row * 120,\r\n        type: \"table\" as const,\r\n        label: `Table ${i + 1}`,\r\n        seats: 8,\r\n        capacity: 10,\r\n      }\r\n    }),\r\n    groups: [\r\n      {\r\n        id: \"group-tables\",\r\n        name: \"All Tables\",\r\n        color: \"#1E40AF\",\r\n        nodeIds: Array.from({ length: 40 }, (_, i) => `table-${i + 1}`),\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"vip-section\",\r\n    name: \"VIP Section Layout\",\r\n    description: \"12 VIP tables with stage and premium positioning\",\r\n    nodes: [\r\n      { id: \"stage-1\", x: 600, y: 100, type: \"stage\", label: \"Main Stage\" },\r\n      ...Array.from({ length: 12 }, (_, i) => {\r\n        const col = i % 4\r\n        const row = Math.floor(i / 4)\r\n        return {\r\n          id: `vip-table-${i + 1}`,\r\n          x: 300 + col * 150,\r\n          y: 300 + row * 140,\r\n          type: \"vip-table\" as const,\r\n          label: `VIP Table ${i + 1}`,\r\n          seats: 6,\r\n          capacity: 30,\r\n        }\r\n      }),\r\n    ],\r\n    groups: [\r\n      {\r\n        id: \"group-vip\",\r\n        name: \"VIP Tables\",\r\n        color: \"#DC2626\",\r\n        nodeIds: Array.from({ length: 12 }, (_, i) => `vip-table-${i + 1}`),\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"wedding-layout\",\r\n    name: \"Wedding Reception\",\r\n    description: \"Complete wedding setup with stage, tables, buffet, and dance floor\",\r\n    nodes: [\r\n      { id: \"stage-1\", x: 600, y: 80, type: \"stage\", label: \"Stage\" },\r\n      { id: \"entrance-1\", x: 600, y: 1100, type: \"entrance\", label: \"Main Entrance\" },\r\n      { id: \"buffet-1\", x: 100, y: 500, type: \"buffet\", label: \"Buffet Left\" },\r\n      { id: \"buffet-2\", x: 1100, y: 500, type: \"buffet\", label: \"Buffet Right\" },\r\n      ...Array.from({ length: 20 }, (_, i) => {\r\n        const col = i % 5\r\n        const row = Math.floor(i / 5)\r\n        const xOffset = col >= 2.5 ? 150 : 0 // Dance floor space\r\n        return {\r\n          id: `table-${i + 1}`,\r\n          x: 200 + col * 120 + xOffset,\r\n          y: 250 + row * 150,\r\n          type: \"table\" as const,\r\n          label: `Table ${i + 1}`,\r\n          seats: 8,\r\n          capacity: 10,\r\n        }\r\n      }),\r\n    ],\r\n    groups: [\r\n      { id: \"group-food\", name: \"Food Stations\", color: \"#059669\", nodeIds: [\"buffet-1\", \"buffet-2\"] },\r\n      {\r\n        id: \"group-tables\",\r\n        name: \"Guest Tables\",\r\n        color: \"#1E40AF\",\r\n        nodeIds: Array.from({ length: 20 }, (_, i) => `table-${i + 1}`),\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"conference-layout\",\r\n    name: \"Conference Hall\",\r\n    description: \"Professional conference setup with theater-style seating\",\r\n    nodes: [\r\n      { id: \"stage-1\", x: 600, y: 100, type: \"stage\", label: \"Presentation Stage\" },\r\n      { id: \"entrance-1\", x: 300, y: 1000, type: \"entrance\", label: \"Left Entrance\" },\r\n      { id: \"entrance-2\", x: 900, y: 1000, type: \"entrance\", label: \"Right Entrance\" },\r\n      ...Array.from({ length: 30 }, (_, i) => {\r\n        const col = i % 6\r\n        const row = Math.floor(i / 6)\r\n        return {\r\n          id: `table-${i + 1}`,\r\n          x: 250 + col * 140,\r\n          y: 300 + row * 120,\r\n          type: \"table\" as const,\r\n          label: `Table ${i + 1}`,\r\n          seats: 4,\r\n          capacity: 10,\r\n        }\r\n      }),\r\n    ],\r\n    groups: [\r\n      {\r\n        id: \"group-seating\",\r\n        name: \"Theater Seating\",\r\n        color: \"#1E40AF\",\r\n        nodeIds: Array.from({ length: 30 }, (_, i) => `table-${i + 1}`),\r\n      },\r\n    ],\r\n  },\r\n]\r\n\r\n/**\r\n * Removes undefined fields from an object to ensure Firebase compatibility\r\n */\r\nfunction removeUndefinedFields<T extends Record<string, any>>(obj: T): Partial<T> {\r\n  const cleaned: any = {}\r\n  for (const key in obj) {\r\n    if (obj[key] !== undefined) {\r\n      if (\r\n        typeof obj[key] === \"object\" &&\r\n        obj[key] !== null &&\r\n        !(obj[key] instanceof Date) &&\r\n        !(obj[key] instanceof Timestamp)\r\n      ) {\r\n        cleaned[key] = removeUndefinedFields(obj[key])\r\n      } else {\r\n        cleaned[key] = obj[key]\r\n      }\r\n    }\r\n  }\r\n  return cleaned\r\n}\r\n\r\n/**\r\n * Persists the complete venue map configuration to Firebase Firestore.\r\n *\r\n * Persistence Details:\r\n * - Document ID: 'main' in 'venueMaps' collection\r\n * - Stores all node data including custom positions, labels, and coordinates\r\n * - Timestamps are set to server time for consistency\r\n * - Data is immediately available after save for subsequent page loads/sessions\r\n * - Filters out undefined fields to ensure Firebase compatibility\r\n *\r\n * @param venueMap - Complete venue map configuration with all nodes\r\n * @returns Document reference ID\r\n */\r\nexport async function saveVenueMap(venueMap: Omit<VenueMap, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<string> {\r\n  try {\r\n    if (!venueMap.name) {\r\n      throw new Error(\"Venue map name is required\")\r\n    }\r\n    if (!venueMap.imageUrl) {\r\n      throw new Error(\"Venue map imageUrl is required\")\r\n    }\r\n    if (!venueMap.nodes || !Array.isArray(venueMap.nodes)) {\r\n      throw new Error(\"Venue map nodes array is required\")\r\n    }\r\n    if (!venueMap.width || !venueMap.height) {\r\n      throw new Error(\"Venue map dimensions (width/height) are required\")\r\n    }\r\n\r\n    const mapRef = doc(firestore, \"venueMaps\", \"main\")\r\n    const now = Timestamp.now()\r\n\r\n    const cleanedNodes = venueMap.nodes.map((node) => {\r\n      const cleaned: any = {\r\n        id: node.id,\r\n        x: node.x,\r\n        y: node.y,\r\n        type: node.type,\r\n        label: node.label,\r\n      }\r\n\r\n      // Only add optional fields if they have values\r\n      if (node.description !== undefined && node.description !== null) {\r\n        cleaned.description = node.description\r\n      }\r\n      if (node.customLabel !== undefined && node.customLabel !== null) {\r\n        cleaned.customLabel = node.customLabel\r\n      }\r\n      if (node.seats !== undefined && node.seats !== null) {\r\n        cleaned.seats = node.seats\r\n      }\r\n      if (node.capacity !== undefined && node.capacity !== null) {\r\n        cleaned.capacity = node.capacity\r\n      }\r\n      if (node.groupId !== undefined && node.groupId !== null) {\r\n        cleaned.groupId = node.groupId\r\n      }\r\n      if (node.createdAt) {\r\n        cleaned.createdAt = node.createdAt instanceof Date ? Timestamp.fromDate(node.createdAt) : node.createdAt\r\n      }\r\n      if (node.updatedAt) {\r\n        cleaned.updatedAt = node.updatedAt instanceof Date ? Timestamp.fromDate(node.updatedAt) : node.updatedAt\r\n      }\r\n\r\n      return cleaned\r\n    })\r\n\r\n    const dataToSave: any = {\r\n      name: venueMap.name,\r\n      imageUrl: venueMap.imageUrl,\r\n      width: venueMap.width,\r\n      height: venueMap.height,\r\n      nodes: cleanedNodes,\r\n      createdAt: now,\r\n      updatedAt: now,\r\n    }\r\n\r\n    // Only add optional fields if they're defined\r\n    if (venueMap.customImageUrl !== undefined && venueMap.customImageUrl !== null) {\r\n      dataToSave.customImageUrl = venueMap.customImageUrl\r\n    }\r\n    if (venueMap.backgroundOpacity !== undefined && venueMap.backgroundOpacity !== null) {\r\n      dataToSave.backgroundOpacity = venueMap.backgroundOpacity\r\n    }\r\n    if (venueMap.defaultZoom !== undefined && venueMap.defaultZoom !== null) {\r\n      dataToSave.defaultZoom = venueMap.defaultZoom\r\n    }\r\n    if (venueMap.defaultCenter !== undefined && venueMap.defaultCenter !== null) {\r\n      dataToSave.defaultCenter = venueMap.defaultCenter\r\n    }\r\n    if (venueMap.groups !== undefined && venueMap.groups !== null && venueMap.groups.length > 0) {\r\n      dataToSave.groups = venueMap.groups\r\n    }\r\n\r\n    await setDoc(mapRef, dataToSave)\r\n\r\n    console.log(\"[v0] Venue map persisted to Firebase Firestore successfully\")\r\n    return mapRef.id\r\n  } catch (error) {\r\n    console.error(\"[v0] Error saving venue map:\", error)\r\n    if (error instanceof Error) {\r\n      throw new Error(`Failed to save venue map: ${error.message}`)\r\n    }\r\n    throw new Error(\"Failed to save venue map: Unknown error occurred\")\r\n  }\r\n}\r\n\r\n/**\r\n * Retrieves the complete venue map from Firebase Firestore.\r\n *\r\n * Session Persistence:\r\n * - Loads all previously saved node configurations on page load\r\n * - All custom nodes and labels are restored exactly as saved\r\n * - Handles missing data gracefully with empty nodes array\r\n *\r\n * @returns Complete venue map or null if not initialized\r\n */\r\nexport async function getVenueMap(): Promise<VenueMap | null> {\r\n  try {\r\n    const mapRef = doc(firestore, \"venueMaps\", \"main\")\r\n    const snapshot = await getDoc(mapRef)\r\n\r\n    if (!snapshot.exists()) {\r\n      console.log(\"[v0] No existing venue map found in Firestore\")\r\n      return null\r\n    }\r\n\r\n    const data = snapshot.data()\r\n    return {\r\n      id: snapshot.id,\r\n      name: data.name,\r\n      imageUrl: data.imageUrl,\r\n      customImageUrl: data.customImageUrl,\r\n      backgroundOpacity: data.backgroundOpacity,\r\n      width: data.width,\r\n      height: data.height,\r\n      defaultZoom: data.defaultZoom || 0.8,\r\n      defaultCenter: data.defaultCenter || { x: 600, y: 600 },\r\n      nodes: data.nodes || [],\r\n      groups: data.groups || [],\r\n      createdAt: data.createdAt?.toDate() || new Date(),\r\n      updatedAt: data.updatedAt?.toDate() || new Date(),\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching venue map:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport function loadLayoutTemplate(templateId: string): LayoutTemplate | null {\r\n  return LAYOUT_TEMPLATES.find((t) => t.id === templateId) || null\r\n}\r\n\r\n/**\r\n * Builds a graph for pathfinding using manually placed Edge Nodes.\r\n * Edge nodes define walkable corridors and corners that connect entrances to tables.\r\n * All entrances are starting points for pathfinding.\r\n */\r\nexport function buildGraphFromVenueMap(nodes: VenueNode[]): {\r\n  nodes: Array<{ id: string; x: number; y: number; type: string }>\r\n  edges: Array<{ from: string; to: string; weight: number }>\r\n} {\r\n  console.log(\"[v0] Building graph using Edge Nodes for walkable paths\")\r\n\r\n  const graphNodes = nodes.map((node) => ({\r\n    id: node.id,\r\n    x: node.x,\r\n    y: node.y,\r\n    type: node.type,\r\n  }))\r\n\r\n  const edges: Array<{ from: string; to: string; weight: number }> = []\r\n\r\n  const entrances = nodes.filter((n) => n.type === \"entrance\")\r\n  const edgeNodes = nodes.filter((n) => n.type === \"edge-node\")\r\n  const tables = nodes.filter((n) => n.type === \"table\" || n.type === \"vip-table\")\r\n\r\n  console.log(`[v0] Found ${entrances.length} entrances, ${edgeNodes.length} edge nodes, ${tables.length} tables`)\r\n\r\n  if (entrances.length === 0) {\r\n    console.warn(\"[v0] No entrances found - pathfinding will fail\")\r\n    return { nodes: graphNodes, edges }\r\n  }\r\n\r\n  const euclideanDistance = (n1: { x: number; y: number }, n2: { x: number; y: number }) => {\r\n    const dx = n2.x - n1.x\r\n    const dy = n2.y - n1.y\r\n    return Math.sqrt(dx * dx + dy * dy)\r\n  }\r\n\r\n  for (let i = 0; i < entrances.length; i++) {\r\n    for (let j = i + 1; j < entrances.length; j++) {\r\n      const dist = euclideanDistance(entrances[i], entrances[j])\r\n      edges.push({ from: entrances[i].id, to: entrances[j].id, weight: dist })\r\n      edges.push({ from: entrances[j].id, to: entrances[i].id, weight: dist })\r\n    }\r\n  }\r\n\r\n  // Connect edge nodes that are vertically or horizontally aligned within tolerance\r\n  const alignmentTolerance = 30 // Allow slight misalignment\r\n\r\n  for (let i = 0; i < edgeNodes.length; i++) {\r\n    for (let j = i + 1; j < edgeNodes.length; j++) {\r\n      const node1 = edgeNodes[i]\r\n      const node2 = edgeNodes[j]\r\n\r\n      const dx = Math.abs(node2.x - node1.x)\r\n      const dy = Math.abs(node2.y - node1.y)\r\n\r\n      // Check if aligned vertically (same X)\r\n      const isVerticallyAligned = dx < alignmentTolerance\r\n      // Check if aligned horizontally (same Y)\r\n      const isHorizontallyAligned = dy < alignmentTolerance\r\n\r\n      if (isVerticallyAligned || isHorizontallyAligned) {\r\n        const dist = euclideanDistance(node1, node2)\r\n        // Only connect nearby edge nodes (< 300px apart)\r\n        if (dist < 300) {\r\n          const weight = isVerticallyAligned ? dist : dist * 1.2 // Slightly prefer vertical movement\r\n          edges.push({ from: node1.id, to: node2.id, weight })\r\n          edges.push({ from: node2.id, to: node1.id, weight })\r\n          console.log(\r\n            `[v0] Connected edge nodes ${node1.label} <-> ${node2.label} (${isVerticallyAligned ? \"vertical\" : \"horizontal\"}, ${Math.round(dist)}px)`,\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  entrances.forEach((entrance) => {\r\n    const nearestEdgeNodes = edgeNodes\r\n      .map((edge) => ({ edge, dist: euclideanDistance(entrance, edge) }))\r\n      .sort((a, b) => a.dist - b.dist)\r\n      .slice(0, 3) // Connect to 3 nearest edge nodes\r\n\r\n    nearestEdgeNodes.forEach(({ edge, dist }) => {\r\n      if (dist < 400) {\r\n        edges.push({ from: entrance.id, to: edge.id, weight: dist })\r\n        edges.push({ from: edge.id, to: entrance.id, weight: dist })\r\n        console.log(`[v0] Connected entrance ${entrance.label} to edge node ${edge.label} (${Math.round(dist)}px)`)\r\n      }\r\n    })\r\n  })\r\n\r\n  tables.forEach((table) => {\r\n    const nearestEdgeNodes = edgeNodes\r\n      .map((edge) => ({ edge, dist: euclideanDistance(table, edge) }))\r\n      .sort((a, b) => a.dist - b.dist)\r\n      .slice(0, 2) // Connect each table to 2 nearest edge nodes\r\n\r\n    nearestEdgeNodes.forEach(({ edge, dist }) => {\r\n      if (dist < 250) {\r\n        // Tables only connect if very close to edge node\r\n        edges.push({ from: edge.id, to: table.id, weight: dist })\r\n        edges.push({ from: table.id, to: edge.id, weight: dist })\r\n      }\r\n    })\r\n  })\r\n\r\n  console.log(`[v0] Built edge node graph: ${graphNodes.length} nodes, ${edges.length} edges`)\r\n  console.log(`[v0] Edge nodes define walkable corridors with 90-degree turns, entrances are all starting points`)\r\n\r\n  return { nodes: graphNodes, edges }\r\n}\r\n\r\nexport async function addVenueNode(node: Omit<VenueNode, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<VenueNode> {\r\n  try {\r\n    const venueMap = await getVenueMap()\r\n    if (!venueMap) throw new Error(\"Venue map not found\")\r\n\r\n    const newNode: VenueNode = {\r\n      ...node,\r\n      id: `node-${Date.now()}`,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    }\r\n\r\n    const updatedNodes = [...venueMap.nodes, newNode]\r\n    await saveVenueMap({\r\n      ...venueMap,\r\n      nodes: updatedNodes,\r\n    })\r\n\r\n    return newNode\r\n  } catch (error) {\r\n    console.error(\"[v0] Error adding venue node:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function updateVenueNode(nodeId: string, updates: Partial<VenueNode>): Promise<void> {\r\n  try {\r\n    const venueMap = await getVenueMap()\r\n    if (!venueMap) throw new Error(\"Venue map not found\")\r\n\r\n    const updatedNodes = venueMap.nodes.map((node) =>\r\n      node.id === nodeId ? { ...node, ...updates, updatedAt: new Date() } : node,\r\n    )\r\n\r\n    await saveVenueMap({\r\n      ...venueMap,\r\n      nodes: updatedNodes,\r\n    })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error updating venue node:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function deleteVenueNode(nodeId: string): Promise<void> {\r\n  try {\r\n    const venueMap = await getVenueMap()\r\n    if (!venueMap) throw new Error(\"Venue map not found\")\r\n\r\n    const updatedNodes = venueMap.nodes.filter((node) => node.id !== nodeId)\r\n\r\n    await saveVenueMap({\r\n      ...venueMap,\r\n      nodes: updatedNodes,\r\n    })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error deleting venue node:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function initializeDefaultVenueMap(): Promise<VenueMap> {\r\n  const defaultMap: Omit<VenueMap, \"id\" | \"createdAt\" | \"updatedAt\"> = {\r\n    name: \"Main Event Venue\",\r\n    imageUrl:\r\n      \"https://hebbkx1anhila5yf.public.blob.vercel-storage.com/9caa3868-4cd5-468f-9fe7-4dc613433d03.jfif-bjuGNoSEEOVtEQdwylS2JSfEkM6Jhy.jpeg\",\r\n    width: 1200,\r\n    height: 1400,\r\n    defaultZoom: 0.8,\r\n    defaultCenter: { x: 600, y: 700 },\r\n    nodes: [\r\n      // Entrances\r\n      { id: \"entrance-1\", x: 300, y: 1350, type: \"entrance\", label: \"Main Entrance\", description: \"South entrance\" },\r\n      {\r\n        id: \"entrance-2\",\r\n        x: 600,\r\n        y: 1350,\r\n        type: \"entrance\",\r\n        label: \"Entrance 2\",\r\n        description: \"South entrance (center)\",\r\n      },\r\n      {\r\n        id: \"entrance-3\",\r\n        x: 900,\r\n        y: 1350,\r\n        type: \"entrance\",\r\n        label: \"Entrance 3\",\r\n        description: \"South entrance (right)\",\r\n      },\r\n\r\n      // Stage\r\n      { id: \"stage\", x: 600, y: 50, type: \"stage\", label: \"STAGE\", description: \"Main stage\" },\r\n\r\n      // Buffets\r\n      { id: \"buffet-1\", x: 50, y: 400, type: \"buffet\", label: \"BUFFET1\", description: \"Left side buffet\" },\r\n      { id: \"buffet-2\", x: 50, y: 700, type: \"buffet\", label: \"BUFFET2\", description: \"Left side buffet (lower)\" },\r\n      { id: \"buffet-3\", x: 1150, y: 700, type: \"buffet\", label: \"BUFFET3\", description: \"Right side buffet\" },\r\n\r\n      // Carving Tables\r\n      {\r\n        id: \"carving-1\",\r\n        x: 100,\r\n        y: 600,\r\n        type: \"carving-table\",\r\n        label: \"CARVING TABLE\",\r\n        description: \"Left side carving station\",\r\n      },\r\n      {\r\n        id: \"carving-2\",\r\n        x: 1100,\r\n        y: 600,\r\n        type: \"carving-table\",\r\n        label: \"CARVING TABLE\",\r\n        description: \"Right side carving station\",\r\n      },\r\n\r\n      // Photo Exhibit\r\n      {\r\n        id: \"photo-exhibit\",\r\n        x: 600,\r\n        y: 1200,\r\n        type: \"photo-exhibit\",\r\n        label: \"PHOTO EXHIBIT\",\r\n        description: \"Photo exhibition area\",\r\n      },\r\n\r\n      // Crying Room\r\n      { id: \"crying-room\", x: 250, y: 1150, type: \"crying-room\", label: \"CRYING ROOM\", description: \"Comfort room\" },\r\n\r\n      // VIP Tables\r\n      { id: \"vip-table-1\", x: 450, y: 250, type: \"vip-table\", label: \"VIP TABLE 1\", seats: 8, capacity: 30 },\r\n      { id: \"vip-table-2\", x: 750, y: 250, type: \"vip-table\", label: \"VIP TABLE 2\", seats: 8, capacity: 30 },\r\n\r\n      // Regular Tables (sampling - 20 tables shown, total 80)\r\n      { id: \"table-1\", x: 200, y: 150, type: \"table\", label: \"Table 1\", seats: 8, capacity: 10 },\r\n      { id: \"table-2\", x: 350, y: 150, type: \"table\", label: \"Table 2\", seats: 8, capacity: 10 },\r\n      { id: \"table-5\", x: 200, y: 300, type: \"table\", label: \"Table 5\", seats: 8, capacity: 10 },\r\n      { id: \"table-6\", x: 350, y: 300, type: \"table\", label: \"Table 6\", seats: 8, capacity: 10 },\r\n      { id: \"table-9\", x: 200, y: 450, type: \"table\", label: \"Table 9\", seats: 8, capacity: 10 },\r\n      { id: \"table-10\", x: 350, y: 450, type: \"table\", label: \"Table 10\", seats: 8, capacity: 10 },\r\n      { id: \"table-21\", x: 850, y: 150, type: \"table\", label: \"Table 21\", seats: 8, capacity: 10 },\r\n      { id: \"table-22\", x: 1000, y: 150, type: \"table\", label: \"Table 22\", seats: 8, capacity: 10 },\r\n      { id: \"table-25\", x: 850, y: 300, type: \"table\", label: \"Table 25\", seats: 8, capacity: 10 },\r\n      { id: \"table-26\", x: 1000, y: 300, type: \"table\", label: \"Table 26\", seats: 8, capacity: 10 },\r\n    ],\r\n    groups: [\r\n      { id: \"group-1\", name: \"Entrances\", color: \"#FF5733\", nodeIds: [\"entrance-1\", \"entrance-2\", \"entrance-3\"] },\r\n      {\r\n        id: \"group-2\",\r\n        name: \"Food Stations\",\r\n        color: \"#33FF57\",\r\n        nodeIds: [\"buffet-1\", \"buffet-2\", \"buffet-3\", \"carving-1\", \"carving-2\"],\r\n      },\r\n      { id: \"group-3\", name: \"Special Areas\", color: \"#3357FF\", nodeIds: [\"photo-exhibit\", \"crying-room\", \"stage\"] },\r\n      { id: \"group-4\", name: \"VIP Tables\", color: \"#F333FF\", nodeIds: [\"vip-table-1\", \"vip-table-2\"] },\r\n      {\r\n        id: \"group-5\",\r\n        name: \"Regular Tables\",\r\n        color: \"#FF33A1\",\r\n        nodeIds: [\r\n          \"table-1\",\r\n          \"table-2\",\r\n          \"table-5\",\r\n          \"table-6\",\r\n          \"table-9\",\r\n          \"table-10\",\r\n          \"table-21\",\r\n          \"table-22\",\r\n          \"table-25\",\r\n          \"table-26\",\r\n        ],\r\n      },\r\n    ],\r\n  }\r\n\r\n  await saveVenueMap(defaultMap)\r\n  const saved = await getVenueMap()\r\n  return saved!\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;;;AA4DO,MAAM,mBAAqC;IAChD;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAG,GAAG,CAAC,GAAG;YACpC,MAAM,MAAM,IAAI;YAChB,MAAM,MAAM,KAAK,KAAK,CAAC,IAAI;YAC3B,MAAM,UAAU,OAAO,IAAI,MAAM,EAAE,eAAe;;YAClD,OAAO;gBACL,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG;gBACpB,GAAG,MAAM,MAAM,MAAM;gBACrB,GAAG,MAAM,MAAM;gBACf,MAAM;gBACN,OAAO,CAAC,MAAM,EAAE,IAAI,GAAG;gBACvB,OAAO;gBACP,UAAU;YACZ;QACF;QACA,QAAQ;YACN;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,SAAS,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAG,GAAG,CAAC,GAAG,IAAM,CAAC,MAAM,EAAE,IAAI,GAAG;YAChE;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;YACL;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;YAAa;eACjE,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAG,GAAG,CAAC,GAAG;gBAChC,MAAM,MAAM,IAAI;gBAChB,MAAM,MAAM,KAAK,KAAK,CAAC,IAAI;gBAC3B,OAAO;oBACL,IAAI,CAAC,UAAU,EAAE,IAAI,GAAG;oBACxB,GAAG,MAAM,MAAM;oBACf,GAAG,MAAM,MAAM;oBACf,MAAM;oBACN,OAAO,CAAC,UAAU,EAAE,IAAI,GAAG;oBAC3B,OAAO;oBACP,UAAU;gBACZ;YACF;SACD;QACD,QAAQ;YACN;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,SAAS,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAG,GAAG,CAAC,GAAG,IAAM,CAAC,UAAU,EAAE,IAAI,GAAG;YACpE;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;YACL;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAI,MAAM;gBAAS,OAAO;YAAQ;YAC9D;gBAAE,IAAI;gBAAc,GAAG;gBAAK,GAAG;gBAAM,MAAM;gBAAY,OAAO;YAAgB;YAC9E;gBAAE,IAAI;gBAAY,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAU,OAAO;YAAc;YACvE;gBAAE,IAAI;gBAAY,GAAG;gBAAM,GAAG;gBAAK,MAAM;gBAAU,OAAO;YAAe;eACtE,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAG,GAAG,CAAC,GAAG;gBAChC,MAAM,MAAM,IAAI;gBAChB,MAAM,MAAM,KAAK,KAAK,CAAC,IAAI;gBAC3B,MAAM,UAAU,OAAO,MAAM,MAAM,EAAE,oBAAoB;;gBACzD,OAAO;oBACL,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG;oBACpB,GAAG,MAAM,MAAM,MAAM;oBACrB,GAAG,MAAM,MAAM;oBACf,MAAM;oBACN,OAAO,CAAC,MAAM,EAAE,IAAI,GAAG;oBACvB,OAAO;oBACP,UAAU;gBACZ;YACF;SACD;QACD,QAAQ;YACN;gBAAE,IAAI;gBAAc,MAAM;gBAAiB,OAAO;gBAAW,SAAS;oBAAC;oBAAY;iBAAW;YAAC;YAC/F;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,SAAS,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAG,GAAG,CAAC,GAAG,IAAM,CAAC,MAAM,EAAE,IAAI,GAAG;YAChE;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,OAAO;YACL;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;YAAqB;YAC5E;gBAAE,IAAI;gBAAc,GAAG;gBAAK,GAAG;gBAAM,MAAM;gBAAY,OAAO;YAAgB;YAC9E;gBAAE,IAAI;gBAAc,GAAG;gBAAK,GAAG;gBAAM,MAAM;gBAAY,OAAO;YAAiB;eAC5E,MAAM,IAAI,CAAC;gBAAE,QAAQ;YAAG,GAAG,CAAC,GAAG;gBAChC,MAAM,MAAM,IAAI;gBAChB,MAAM,MAAM,KAAK,KAAK,CAAC,IAAI;gBAC3B,OAAO;oBACL,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG;oBACpB,GAAG,MAAM,MAAM;oBACf,GAAG,MAAM,MAAM;oBACf,MAAM;oBACN,OAAO,CAAC,MAAM,EAAE,IAAI,GAAG;oBACvB,OAAO;oBACP,UAAU;gBACZ;YACF;SACD;QACD,QAAQ;YACN;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,SAAS,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAG,GAAG,CAAC,GAAG,IAAM,CAAC,MAAM,EAAE,IAAI,GAAG;YAChE;SACD;IACH;CACD;AAED;;CAEC,GACD,SAAS,sBAAqD,GAAM;IAClE,MAAM,UAAe,CAAC;IACtB,IAAK,MAAM,OAAO,IAAK;QACrB,IAAI,GAAG,CAAC,IAAI,KAAK,WAAW;YAC1B,IACE,OAAO,GAAG,CAAC,IAAI,KAAK,YACpB,GAAG,CAAC,IAAI,KAAK,QACb,CAAC,CAAC,GAAG,CAAC,IAAI,YAAY,IAAI,KAC1B,CAAC,CAAC,GAAG,CAAC,IAAI,YAAY,8KAAS,GAC/B;gBACA,OAAO,CAAC,IAAI,GAAG,sBAAsB,GAAG,CAAC,IAAI;YAC/C,OAAO;gBACL,OAAO,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI;YACzB;QACF;IACF;IACA,OAAO;AACT;AAeO,eAAe,aAAa,QAA0D;IAC3F,IAAI;QACF,IAAI,CAAC,SAAS,IAAI,EAAE;YAClB,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,CAAC,SAAS,QAAQ,EAAE;YACtB,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,MAAM,OAAO,CAAC,SAAS,KAAK,GAAG;YACrD,MAAM,IAAI,MAAM;QAClB;QACA,IAAI,CAAC,SAAS,KAAK,IAAI,CAAC,SAAS,MAAM,EAAE;YACvC,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,SAAS,IAAA,wKAAG,EAAC,4HAAS,EAAE,aAAa;QAC3C,MAAM,MAAM,8KAAS,CAAC,GAAG;QAEzB,MAAM,eAAe,SAAS,KAAK,CAAC,GAAG,CAAC,CAAC;YACvC,MAAM,UAAe;gBACnB,IAAI,KAAK,EAAE;gBACX,GAAG,KAAK,CAAC;gBACT,GAAG,KAAK,CAAC;gBACT,MAAM,KAAK,IAAI;gBACf,OAAO,KAAK,KAAK;YACnB;YAEA,+CAA+C;YAC/C,IAAI,KAAK,WAAW,KAAK,aAAa,KAAK,WAAW,KAAK,MAAM;gBAC/D,QAAQ,WAAW,GAAG,KAAK,WAAW;YACxC;YACA,IAAI,KAAK,WAAW,KAAK,aAAa,KAAK,WAAW,KAAK,MAAM;gBAC/D,QAAQ,WAAW,GAAG,KAAK,WAAW;YACxC;YACA,IAAI,KAAK,KAAK,KAAK,aAAa,KAAK,KAAK,KAAK,MAAM;gBACnD,QAAQ,KAAK,GAAG,KAAK,KAAK;YAC5B;YACA,IAAI,KAAK,QAAQ,KAAK,aAAa,KAAK,QAAQ,KAAK,MAAM;gBACzD,QAAQ,QAAQ,GAAG,KAAK,QAAQ;YAClC;YACA,IAAI,KAAK,OAAO,KAAK,aAAa,KAAK,OAAO,KAAK,MAAM;gBACvD,QAAQ,OAAO,GAAG,KAAK,OAAO;YAChC;YACA,IAAI,KAAK,SAAS,EAAE;gBAClB,QAAQ,SAAS,GAAG,KAAK,SAAS,YAAY,OAAO,8KAAS,CAAC,QAAQ,CAAC,KAAK,SAAS,IAAI,KAAK,SAAS;YAC1G;YACA,IAAI,KAAK,SAAS,EAAE;gBAClB,QAAQ,SAAS,GAAG,KAAK,SAAS,YAAY,OAAO,8KAAS,CAAC,QAAQ,CAAC,KAAK,SAAS,IAAI,KAAK,SAAS;YAC1G;YAEA,OAAO;QACT;QAEA,MAAM,aAAkB;YACtB,MAAM,SAAS,IAAI;YACnB,UAAU,SAAS,QAAQ;YAC3B,OAAO,SAAS,KAAK;YACrB,QAAQ,SAAS,MAAM;YACvB,OAAO;YACP,WAAW;YACX,WAAW;QACb;QAEA,8CAA8C;QAC9C,IAAI,SAAS,cAAc,KAAK,aAAa,SAAS,cAAc,KAAK,MAAM;YAC7E,WAAW,cAAc,GAAG,SAAS,cAAc;QACrD;QACA,IAAI,SAAS,iBAAiB,KAAK,aAAa,SAAS,iBAAiB,KAAK,MAAM;YACnF,WAAW,iBAAiB,GAAG,SAAS,iBAAiB;QAC3D;QACA,IAAI,SAAS,WAAW,KAAK,aAAa,SAAS,WAAW,KAAK,MAAM;YACvE,WAAW,WAAW,GAAG,SAAS,WAAW;QAC/C;QACA,IAAI,SAAS,aAAa,KAAK,aAAa,SAAS,aAAa,KAAK,MAAM;YAC3E,WAAW,aAAa,GAAG,SAAS,aAAa;QACnD;QACA,IAAI,SAAS,MAAM,KAAK,aAAa,SAAS,MAAM,KAAK,QAAQ,SAAS,MAAM,CAAC,MAAM,GAAG,GAAG;YAC3F,WAAW,MAAM,GAAG,SAAS,MAAM;QACrC;QAEA,MAAM,IAAA,2KAAM,EAAC,QAAQ;QAErB,QAAQ,GAAG,CAAC;QACZ,OAAO,OAAO,EAAE;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,IAAI,iBAAiB,OAAO;YAC1B,MAAM,IAAI,MAAM,CAAC,0BAA0B,EAAE,MAAM,OAAO,EAAE;QAC9D;QACA,MAAM,IAAI,MAAM;IAClB;AACF;AAYO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,IAAA,wKAAG,EAAC,4HAAS,EAAE,aAAa;QAC3C,MAAM,WAAW,MAAM,IAAA,2KAAM,EAAC;QAE9B,IAAI,CAAC,SAAS,MAAM,IAAI;YACtB,QAAQ,GAAG,CAAC;YACZ,OAAO;QACT;QAEA,MAAM,OAAO,SAAS,IAAI;QAC1B,OAAO;YACL,IAAI,SAAS,EAAE;YACf,MAAM,KAAK,IAAI;YACf,UAAU,KAAK,QAAQ;YACvB,gBAAgB,KAAK,cAAc;YACnC,mBAAmB,KAAK,iBAAiB;YACzC,OAAO,KAAK,KAAK;YACjB,QAAQ,KAAK,MAAM;YACnB,aAAa,KAAK,WAAW,IAAI;YACjC,eAAe,KAAK,aAAa,IAAI;gBAAE,GAAG;gBAAK,GAAG;YAAI;YACtD,OAAO,KAAK,KAAK,IAAI,EAAE;YACvB,QAAQ,KAAK,MAAM,IAAI,EAAE;YACzB,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;YAC3C,WAAW,KAAK,SAAS,EAAE,YAAY,IAAI;QAC7C;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM;IACR;AACF;AAEO,SAAS,mBAAmB,UAAkB;IACnD,OAAO,iBAAiB,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,eAAe;AAC9D;AAOO,SAAS,uBAAuB,KAAkB;IAIvD,QAAQ,GAAG,CAAC;IAEZ,MAAM,aAAa,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;YACtC,IAAI,KAAK,EAAE;YACX,GAAG,KAAK,CAAC;YACT,GAAG,KAAK,CAAC;YACT,MAAM,KAAK,IAAI;QACjB,CAAC;IAED,MAAM,QAA6D,EAAE;IAErE,MAAM,YAAY,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IACjD,MAAM,YAAY,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IACjD,MAAM,SAAS,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,WAAW,EAAE,IAAI,KAAK;IAEpE,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,UAAU,MAAM,CAAC,YAAY,EAAE,UAAU,MAAM,CAAC,aAAa,EAAE,OAAO,MAAM,CAAC,OAAO,CAAC;IAE/G,IAAI,UAAU,MAAM,KAAK,GAAG;QAC1B,QAAQ,IAAI,CAAC;QACb,OAAO;YAAE,OAAO;YAAY;QAAM;IACpC;IAEA,MAAM,oBAAoB,CAAC,IAA8B;QACvD,MAAM,KAAK,GAAG,CAAC,GAAG,GAAG,CAAC;QACtB,MAAM,KAAK,GAAG,CAAC,GAAG,GAAG,CAAC;QACtB,OAAO,KAAK,IAAI,CAAC,KAAK,KAAK,KAAK;IAClC;IAEA,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,MAAM,EAAE,IAAK;QACzC,IAAK,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,MAAM,EAAE,IAAK;YAC7C,MAAM,OAAO,kBAAkB,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE;YACzD,MAAM,IAAI,CAAC;gBAAE,MAAM,SAAS,CAAC,EAAE,CAAC,EAAE;gBAAE,IAAI,SAAS,CAAC,EAAE,CAAC,EAAE;gBAAE,QAAQ;YAAK;YACtE,MAAM,IAAI,CAAC;gBAAE,MAAM,SAAS,CAAC,EAAE,CAAC,EAAE;gBAAE,IAAI,SAAS,CAAC,EAAE,CAAC,EAAE;gBAAE,QAAQ;YAAK;QACxE;IACF;IAEA,kFAAkF;IAClF,MAAM,qBAAqB,GAAG,4BAA4B;;IAE1D,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,MAAM,EAAE,IAAK;QACzC,IAAK,IAAI,IAAI,IAAI,GAAG,IAAI,UAAU,MAAM,EAAE,IAAK;YAC7C,MAAM,QAAQ,SAAS,CAAC,EAAE;YAC1B,MAAM,QAAQ,SAAS,CAAC,EAAE;YAE1B,MAAM,KAAK,KAAK,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;YACrC,MAAM,KAAK,KAAK,GAAG,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;YAErC,uCAAuC;YACvC,MAAM,sBAAsB,KAAK;YACjC,yCAAyC;YACzC,MAAM,wBAAwB,KAAK;YAEnC,IAAI,uBAAuB,uBAAuB;gBAChD,MAAM,OAAO,kBAAkB,OAAO;gBACtC,iDAAiD;gBACjD,IAAI,OAAO,KAAK;oBACd,MAAM,SAAS,sBAAsB,OAAO,OAAO,IAAI,oCAAoC;;oBAC3F,MAAM,IAAI,CAAC;wBAAE,MAAM,MAAM,EAAE;wBAAE,IAAI,MAAM,EAAE;wBAAE;oBAAO;oBAClD,MAAM,IAAI,CAAC;wBAAE,MAAM,MAAM,EAAE;wBAAE,IAAI,MAAM,EAAE;wBAAE;oBAAO;oBAClD,QAAQ,GAAG,CACT,CAAC,0BAA0B,EAAE,MAAM,KAAK,CAAC,KAAK,EAAE,MAAM,KAAK,CAAC,EAAE,EAAE,sBAAsB,aAAa,aAAa,EAAE,EAAE,KAAK,KAAK,CAAC,MAAM,GAAG,CAAC;gBAE7I;YACF;QACF;IACF;IAEA,UAAU,OAAO,CAAC,CAAC;QACjB,MAAM,mBAAmB,UACtB,GAAG,CAAC,CAAC,OAAS,CAAC;gBAAE;gBAAM,MAAM,kBAAkB,UAAU;YAAM,CAAC,GAChE,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,EAAE,IAAI,EAC9B,KAAK,CAAC,GAAG,GAAG,kCAAkC;;QAEjD,iBAAiB,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE;YACtC,IAAI,OAAO,KAAK;gBACd,MAAM,IAAI,CAAC;oBAAE,MAAM,SAAS,EAAE;oBAAE,IAAI,KAAK,EAAE;oBAAE,QAAQ;gBAAK;gBAC1D,MAAM,IAAI,CAAC;oBAAE,MAAM,KAAK,EAAE;oBAAE,IAAI,SAAS,EAAE;oBAAE,QAAQ;gBAAK;gBAC1D,QAAQ,GAAG,CAAC,CAAC,wBAAwB,EAAE,SAAS,KAAK,CAAC,cAAc,EAAE,KAAK,KAAK,CAAC,EAAE,EAAE,KAAK,KAAK,CAAC,MAAM,GAAG,CAAC;YAC5G;QACF;IACF;IAEA,OAAO,OAAO,CAAC,CAAC;QACd,MAAM,mBAAmB,UACtB,GAAG,CAAC,CAAC,OAAS,CAAC;gBAAE;gBAAM,MAAM,kBAAkB,OAAO;YAAM,CAAC,GAC7D,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,EAAE,IAAI,EAC9B,KAAK,CAAC,GAAG,GAAG,6CAA6C;;QAE5D,iBAAiB,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE;YACtC,IAAI,OAAO,KAAK;gBACd,iDAAiD;gBACjD,MAAM,IAAI,CAAC;oBAAE,MAAM,KAAK,EAAE;oBAAE,IAAI,MAAM,EAAE;oBAAE,QAAQ;gBAAK;gBACvD,MAAM,IAAI,CAAC;oBAAE,MAAM,MAAM,EAAE;oBAAE,IAAI,KAAK,EAAE;oBAAE,QAAQ;gBAAK;YACzD;QACF;IACF;IAEA,QAAQ,GAAG,CAAC,CAAC,4BAA4B,EAAE,WAAW,MAAM,CAAC,QAAQ,EAAE,MAAM,MAAM,CAAC,MAAM,CAAC;IAC3F,QAAQ,GAAG,CAAC,CAAC,iGAAiG,CAAC;IAE/G,OAAO;QAAE,OAAO;QAAY;IAAM;AACpC;AAEO,eAAe,aAAa,IAAuD;IACxF,IAAI;QACF,MAAM,WAAW,MAAM;QACvB,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;QAE/B,MAAM,UAAqB;YACzB,GAAG,IAAI;YACP,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;YACxB,WAAW,IAAI;YACf,WAAW,IAAI;QACjB;QAEA,MAAM,eAAe;eAAI,SAAS,KAAK;YAAE;SAAQ;QACjD,MAAM,aAAa;YACjB,GAAG,QAAQ;YACX,OAAO;QACT;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,MAAM;IACR;AACF;AAEO,eAAe,gBAAgB,MAAc,EAAE,OAA2B;IAC/E,IAAI;QACF,MAAM,WAAW,MAAM;QACvB,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;QAE/B,MAAM,eAAe,SAAS,KAAK,CAAC,GAAG,CAAC,CAAC,OACvC,KAAK,EAAE,KAAK,SAAS;gBAAE,GAAG,IAAI;gBAAE,GAAG,OAAO;gBAAE,WAAW,IAAI;YAAO,IAAI;QAGxE,MAAM,aAAa;YACjB,GAAG,QAAQ;YACX,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,MAAM;IACR;AACF;AAEO,eAAe,gBAAgB,MAAc;IAClD,IAAI;QACF,MAAM,WAAW,MAAM;QACvB,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;QAE/B,MAAM,eAAe,SAAS,KAAK,CAAC,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;QAEjE,MAAM,aAAa;YACjB,GAAG,QAAQ;YACX,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,MAAM;IACR;AACF;AAEO,eAAe;IACpB,MAAM,aAA+D;QACnE,MAAM;QACN,UACE;QACF,OAAO;QACP,QAAQ;QACR,aAAa;QACb,eAAe;YAAE,GAAG;YAAK,GAAG;QAAI;QAChC,OAAO;YACL,YAAY;YACZ;gBAAE,IAAI;gBAAc,GAAG;gBAAK,GAAG;gBAAM,MAAM;gBAAY,OAAO;gBAAiB,aAAa;YAAiB;YAC7G;gBACE,IAAI;gBACJ,GAAG;gBACH,GAAG;gBACH,MAAM;gBACN,OAAO;gBACP,aAAa;YACf;YACA;gBACE,IAAI;gBACJ,GAAG;gBACH,GAAG;gBACH,MAAM;gBACN,OAAO;gBACP,aAAa;YACf;YAEA,QAAQ;YACR;gBAAE,IAAI;gBAAS,GAAG;gBAAK,GAAG;gBAAI,MAAM;gBAAS,OAAO;gBAAS,aAAa;YAAa;YAEvF,UAAU;YACV;gBAAE,IAAI;gBAAY,GAAG;gBAAI,GAAG;gBAAK,MAAM;gBAAU,OAAO;gBAAW,aAAa;YAAmB;YACnG;gBAAE,IAAI;gBAAY,GAAG;gBAAI,GAAG;gBAAK,MAAM;gBAAU,OAAO;gBAAW,aAAa;YAA2B;YAC3G;gBAAE,IAAI;gBAAY,GAAG;gBAAM,GAAG;gBAAK,MAAM;gBAAU,OAAO;gBAAW,aAAa;YAAoB;YAEtG,iBAAiB;YACjB;gBACE,IAAI;gBACJ,GAAG;gBACH,GAAG;gBACH,MAAM;gBACN,OAAO;gBACP,aAAa;YACf;YACA;gBACE,IAAI;gBACJ,GAAG;gBACH,GAAG;gBACH,MAAM;gBACN,OAAO;gBACP,aAAa;YACf;YAEA,gBAAgB;YAChB;gBACE,IAAI;gBACJ,GAAG;gBACH,GAAG;gBACH,MAAM;gBACN,OAAO;gBACP,aAAa;YACf;YAEA,cAAc;YACd;gBAAE,IAAI;gBAAe,GAAG;gBAAK,GAAG;gBAAM,MAAM;gBAAe,OAAO;gBAAe,aAAa;YAAe;YAE7G,aAAa;YACb;gBAAE,IAAI;gBAAe,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAa,OAAO;gBAAe,OAAO;gBAAG,UAAU;YAAG;YACrG;gBAAE,IAAI;gBAAe,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAa,OAAO;gBAAe,OAAO;gBAAG,UAAU;YAAG;YAErG,wDAAwD;YACxD;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAW,OAAO;gBAAG,UAAU;YAAG;YACzF;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAW,OAAO;gBAAG,UAAU;YAAG;YACzF;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAW,OAAO;gBAAG,UAAU;YAAG;YACzF;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAW,OAAO;gBAAG,UAAU;YAAG;YACzF;gBAAE,IAAI;gBAAW,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAW,OAAO;gBAAG,UAAU;YAAG;YACzF;gBAAE,IAAI;gBAAY,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAY,OAAO;gBAAG,UAAU;YAAG;YAC3F;gBAAE,IAAI;gBAAY,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAY,OAAO;gBAAG,UAAU;YAAG;YAC3F;gBAAE,IAAI;gBAAY,GAAG;gBAAM,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAY,OAAO;gBAAG,UAAU;YAAG;YAC5F;gBAAE,IAAI;gBAAY,GAAG;gBAAK,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAY,OAAO;gBAAG,UAAU;YAAG;YAC3F;gBAAE,IAAI;gBAAY,GAAG;gBAAM,GAAG;gBAAK,MAAM;gBAAS,OAAO;gBAAY,OAAO;gBAAG,UAAU;YAAG;SAC7F;QACD,QAAQ;YACN;gBAAE,IAAI;gBAAW,MAAM;gBAAa,OAAO;gBAAW,SAAS;oBAAC;oBAAc;oBAAc;iBAAa;YAAC;YAC1G;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,SAAS;oBAAC;oBAAY;oBAAY;oBAAY;oBAAa;iBAAY;YACzE;YACA;gBAAE,IAAI;gBAAW,MAAM;gBAAiB,OAAO;gBAAW,SAAS;oBAAC;oBAAiB;oBAAe;iBAAQ;YAAC;YAC7G;gBAAE,IAAI;gBAAW,MAAM;gBAAc,OAAO;gBAAW,SAAS;oBAAC;oBAAe;iBAAc;YAAC;YAC/F;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,SAAS;oBACP;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;oBACA;iBACD;YACH;SACD;IACH;IAEA,MAAM,aAAa;IACnB,MAAM,QAAQ,MAAM;IACpB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1013, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bernie%20Mar%20Malabunga/Documents/GitHub/seating-tracker/components/pathfinding-visualization.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { getVenueMap, type VenueNode } from \"@/lib/venue-map-service\"\r\nimport { AlertCircle, Maximize2, Minimize2, ZoomIn, ZoomOut } from \"lucide-react\"\r\n\r\ninterface PathfindingVisualizationProps {\r\n  seatId: number | null\r\n  imageSrc?: string\r\n  showBackground?: boolean\r\n  isVip?: boolean\r\n}\r\n\r\nexport function PathfindingVisualization({\r\n  seatId,\r\n  imageSrc,\r\n  showBackground = false,\r\n  isVip = false,\r\n}: PathfindingVisualizationProps) {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null)\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n\r\n  const [venueNodes, setVenueNodes] = useState<VenueNode[]>([])\r\n  const [isLoading, setIsLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // zoom / pan\r\n  const [zoom, setZoom] = useState(1)\r\n  const [isFullscreen, setIsFullscreen] = useState(false)\r\n  const [pan, setPan] = useState({ x: 0, y: 0 })\r\n\r\n  // pointer / gesture state (mouse + touch)\r\n  const pointersRef = useRef<Map<number, { x: number; y: number }>>(new Map())\r\n  const lastPinchDistanceRef = useRef<number | null>(null)\r\n\r\n  // dragging\r\n  const dragPointerIdRef = useRef<number | null>(null)\r\n  const lastDragPosRef = useRef<{ x: number; y: number } | null>(null)\r\n\r\n  // double-tap / double-click\r\n  const lastTapTimeRef = useRef<number | null>(null)\r\n  const lastTapPosRef = useRef<{ x: number; y: number } | null>(null)\r\n\r\n  // tuning\r\n  const PAN_SPEED = 1.4\r\n  const WHEEL_ZOOM_IN = 1.2\r\n  const WHEEL_ZOOM_OUT = 0.8\r\n  const DOUBLE_TAP_ZOOM = 1.6\r\n\r\n  // Load venue nodes from Firebase\r\n  useEffect(() => {\r\n    async function loadVenueData() {\r\n      try {\r\n        const venueMap = await getVenueMap()\r\n        if (venueMap && venueMap.nodes) {\r\n          setVenueNodes(venueMap.nodes)\r\n          setError(null)\r\n        } else {\r\n          setError(\"No venue map configured\")\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[v0] Error loading venue map:\", err)\r\n        setError(\"Failed to load venue map\")\r\n      } finally {\r\n        setIsLoading(false)\r\n      }\r\n    }\r\n    loadVenueData()\r\n  }, [])\r\n\r\n  // Validate the requested seat exists\r\n  useEffect(() => {\r\n    if (!seatId || venueNodes.length === 0) return\r\n\r\n    try {\r\n      const targetTable = venueNodes.find((node) => {\r\n        const expectedType = isVip ? \"vip-table\" : \"table\"\r\n        if (node.type !== expectedType) return false\r\n        const tableNum = node.label.match(/\\d+/)?.[0]\r\n        return tableNum === String(seatId)\r\n      })\r\n\r\n      if (!targetTable) {\r\n        setError(`${isVip ? \"VIP \" : \"\"}Table ${seatId} not found`)\r\n      } else {\r\n        setError(null)\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[v0] Error finding table:\", err)\r\n      setError(\"Error locating table\")\r\n    }\r\n  }, [seatId, venueNodes, isVip])\r\n\r\n  // --- Zoom / pan helpers ----------------------------------------------------\r\n\r\n  const clampZoom = (z: number) => Math.min(4, Math.max(0.5, z))\r\n\r\n  const zoomAtPoint = (factor: number, clientX: number, clientY: number) => {\r\n    const canvas = canvasRef.current\r\n    if (!canvas) return\r\n\r\n    const rect = canvas.getBoundingClientRect()\r\n    const x = clientX - rect.left\r\n    const y = clientY - rect.top\r\n\r\n    setZoom((prevZoom) => {\r\n      const targetZoom = clampZoom(prevZoom * factor)\r\n      const actualFactor = targetZoom / prevZoom\r\n      if (actualFactor === 1) return prevZoom\r\n\r\n      setPan((prevPan) => {\r\n        const worldX = (x - prevPan.x) / prevZoom\r\n        const worldY = (y - prevPan.y) / prevZoom\r\n\r\n        return {\r\n          x: x - worldX * targetZoom,\r\n          y: y - worldY * targetZoom,\r\n        }\r\n      })\r\n\r\n      return targetZoom\r\n    })\r\n  }\r\n\r\n  const zoomToCenter = (factor: number) => {\r\n    const canvas = canvasRef.current\r\n    if (!canvas) return\r\n    const rect = canvas.getBoundingClientRect()\r\n    zoomAtPoint(factor, rect.left + rect.width / 2, rect.top + rect.height / 2)\r\n  }\r\n\r\n  const handleZoomIn = () => zoomToCenter(DOUBLE_TAP_ZOOM)\r\n  const handleZoomOut = () => zoomToCenter(1 / DOUBLE_TAP_ZOOM)\r\n\r\n  const handleResetView = () => {\r\n    setZoom(1)\r\n    setPan({ x: 0, y: 0 })\r\n  }\r\n\r\n  const toggleFullscreen = () => {\r\n    setIsFullscreen((prev) => !prev)\r\n    if (!isFullscreen) {\r\n      handleResetView()\r\n    }\r\n  }\r\n\r\n  // --- Double-tap / double-click detection ----------------------------------\r\n\r\n  const handleTouchDoubleTapCheck = (e: React.PointerEvent<HTMLCanvasElement>) => {\r\n    if (e.pointerType !== \"touch\") return false\r\n\r\n    const now = performance.now()\r\n    const lastTime = lastTapTimeRef.current\r\n    const lastPos = lastTapPosRef.current\r\n\r\n    const TAP_THRESHOLD_MS = 300\r\n    const TAP_DISTANCE_PX = 30\r\n\r\n    let isDoubleTap = false\r\n\r\n    if (lastTime && now - lastTime < TAP_THRESHOLD_MS && lastPos) {\r\n      const dx = e.clientX - lastPos.x\r\n      const dy = e.clientY - lastPos.y\r\n      const dist = Math.hypot(dx, dy)\r\n      if (dist < TAP_DISTANCE_PX) {\r\n        isDoubleTap = true\r\n      }\r\n    }\r\n\r\n    if (isDoubleTap) {\r\n      zoomAtPoint(DOUBLE_TAP_ZOOM, e.clientX, e.clientY)\r\n      lastTapTimeRef.current = null\r\n      lastTapPosRef.current = null\r\n      return true\r\n    } else {\r\n      lastTapTimeRef.current = now\r\n      lastTapPosRef.current = { x: e.clientX, y: e.clientY }\r\n      return false\r\n    }\r\n  }\r\n\r\n  const handleDoubleClick = (e: React.MouseEvent<HTMLCanvasElement>) => {\r\n    zoomAtPoint(DOUBLE_TAP_ZOOM, e.clientX, e.clientY)\r\n  }\r\n\r\n  // --- Pointer handlers: drag + pinch ---------------------------------------\r\n\r\n  const handlePointerDown = (e: React.PointerEvent<HTMLCanvasElement>) => {\r\n    if (e.pointerType === \"touch\") {\r\n      const used = handleTouchDoubleTapCheck(e)\r\n      if (used) return\r\n    }\r\n\r\n    const id = e.pointerId\r\n    pointersRef.current.set(id, { x: e.clientX, y: e.clientY })\r\n    ;(e.target as HTMLElement).setPointerCapture(id)\r\n\r\n    const pointers = [...pointersRef.current.entries()]\r\n\r\n    if (pointers.length === 1) {\r\n      dragPointerIdRef.current = id\r\n      lastDragPosRef.current = { x: e.clientX, y: e.clientY }\r\n      lastPinchDistanceRef.current = null\r\n    } else if (pointers.length === 2) {\r\n      const [, p1] = pointers[0]\r\n      const [, p2] = pointers[1]\r\n      const dist = Math.hypot(p2.x - p1.x, p2.y - p1.y)\r\n      lastPinchDistanceRef.current = dist\r\n      dragPointerIdRef.current = null\r\n      lastDragPosRef.current = null\r\n    }\r\n  }\r\n\r\n  const handlePointerMove = (e: React.PointerEvent<HTMLCanvasElement>) => {\r\n    const id = e.pointerId\r\n    if (!pointersRef.current.has(id)) return\r\n\r\n    pointersRef.current.set(id, { x: e.clientX, y: e.clientY })\r\n\r\n    const pointers = [...pointersRef.current.values()]\r\n\r\n    if (pointers.length === 1 && dragPointerIdRef.current === id && lastDragPosRef.current) {\r\n      const dx = (e.clientX - lastDragPosRef.current.x) * PAN_SPEED\r\n      const dy = (e.clientY - lastDragPosRef.current.y) * PAN_SPEED\r\n\r\n      lastDragPosRef.current = { x: e.clientX, y: e.clientY }\r\n\r\n      setPan((prev) => ({\r\n        x: prev.x + dx,\r\n        y: prev.y + dy,\r\n      }))\r\n    } else if (pointers.length >= 2 && lastPinchDistanceRef.current) {\r\n      e.preventDefault()\r\n      const [p1, p2] = pointers\r\n      const dist = Math.hypot(p2.x - p1.x, p2.y - p1.y)\r\n      if (dist === 0) return\r\n\r\n      const factor = dist / lastPinchDistanceRef.current\r\n      const centerX = (p1.x + p2.x) / 2\r\n      const centerY = (p1.y + p2.y) / 2\r\n\r\n      zoomAtPoint(factor, centerX, centerY)\r\n      lastPinchDistanceRef.current = dist\r\n    }\r\n  }\r\n\r\n  const endPointer = (e: React.PointerEvent<HTMLCanvasElement>) => {\r\n    const id = e.pointerId\r\n    pointersRef.current.delete(id)\r\n    ;(e.target as HTMLElement).releasePointerCapture(id)\r\n\r\n    const remaining = [...pointersRef.current.entries()]\r\n\r\n    if (remaining.length === 0) {\r\n      dragPointerIdRef.current = null\r\n      lastPinchDistanceRef.current = null\r\n      lastDragPosRef.current = null\r\n    } else if (remaining.length === 1) {\r\n      const [remainingId, point] = remaining[0]\r\n      dragPointerIdRef.current = remainingId\r\n      lastPinchDistanceRef.current = null\r\n      lastDragPosRef.current = { x: point.x, y: point.y }\r\n    }\r\n  }\r\n\r\n  const handlePointerUp = (e: React.PointerEvent<HTMLCanvasElement>) => {\r\n    endPointer(e)\r\n  }\r\n\r\n  const handlePointerCancel = (e: React.PointerEvent<HTMLCanvasElement>) => {\r\n    endPointer(e)\r\n  }\r\n\r\n  const handleWheel = (e: React.WheelEvent<HTMLCanvasElement>) => {\r\n    e.preventDefault()\r\n    const factor = e.deltaY < 0 ? WHEEL_ZOOM_IN : WHEEL_ZOOM_OUT\r\n    zoomAtPoint(factor, e.clientX, e.clientY)\r\n  }\r\n\r\n  // --- Drawing --------------------------------------------------------------\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    if (!canvas || venueNodes.length === 0) return\r\n\r\n    const ctx = canvas.getContext(\"2d\")\r\n    if (!ctx) return\r\n\r\n    const allX = venueNodes.map((n) => n.x)\r\n    const allY = venueNodes.map((n) => n.y)\r\n    const rawMinX = Math.min(...allX)\r\n    const rawMaxX = Math.max(...allX)\r\n    const rawMinY = Math.min(...allY)\r\n    const rawMaxY = Math.max(...allY)\r\n\r\n    const rawWidth = rawMaxX - rawMinX\r\n    const rawHeight = rawMaxY - rawMinY\r\n\r\n    //  IMPORTANT CHANGE:\r\n    // Always use the FULL map bounds (no cropping around the selected seat)\r\n    const margin = 40\r\n    const minX = rawMinX - margin\r\n    const maxX = rawMaxX + margin\r\n    const minY = rawMinY - margin\r\n    const maxY = rawMaxY + margin\r\n\r\n    const contentWidth = maxX - minX\r\n    const contentHeight = maxY - minY\r\n\r\n    // Use container size (fullscreen or embedded)\r\n    const parent = canvas.parentElement as HTMLElement | null\r\n    const canvasWidth = parent?.clientWidth ?? 1400\r\n    const canvasHeight =\r\n      parent?.clientHeight ?? Math.ceil((contentHeight / contentWidth) * canvasWidth)\r\n\r\n    canvas.width = canvasWidth\r\n    canvas.height = canvasHeight\r\n\r\n    // Scale so the WHOLE map fits inside the container\r\n    const scaleX = canvasWidth / contentWidth\r\n    const scaleY = canvasHeight / contentHeight\r\n    const scale = Math.min(scaleX, scaleY)\r\n\r\n    ctx.fillStyle = \"#FFFFFF\"\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n    ctx.save()\r\n    ctx.scale(zoom, zoom)\r\n    ctx.translate(pan.x / zoom, pan.y / zoom)\r\n\r\n    const toCanvas = (x: number, y: number) => ({\r\n      x: (x - minX) * scale,\r\n      y: (y - minY) * scale,\r\n    })\r\n\r\n    const drawNode = (node: VenueNode, highlight = false) => {\r\n      const pos = toCanvas(node.x, node.y)\r\n\r\n      if (node.type === \"stage\") {\r\n        ctx.fillStyle = \"#1E3A8A\"\r\n        ctx.fillRect(pos.x - 100 * scale, pos.y - 20 * scale, 200 * scale, 40 * scale)\r\n        ctx.fillStyle = \"#FFFFFF\"\r\n        ctx.font = `bold ${Math.max(12, 16 * scale)}px sans-serif`\r\n        ctx.textAlign = \"center\"\r\n        ctx.textBaseline = \"middle\"\r\n        ctx.fillText(\"STAGE\", pos.x, pos.y)\r\n      } else if (node.type === \"buffet\") {\r\n        ctx.fillStyle = \"#1F2937\"\r\n        ctx.fillRect(pos.x - 15 * scale, pos.y - 30 * scale, 30 * scale, 60 * scale)\r\n        ctx.fillStyle = \"#FFFFFF\"\r\n        ctx.font = `${Math.max(8, 10 * scale)}px sans-serif`\r\n        ctx.textAlign = \"center\"\r\n        ctx.save()\r\n        ctx.translate(pos.x, pos.y)\r\n        ctx.rotate(-Math.PI / 2)\r\n        ctx.fillText(\"BUFFET\", 0, 0)\r\n        ctx.restore()\r\n      } else if (node.type === \"carving-table\") {\r\n        ctx.fillStyle = \"#7C3AED\"\r\n        ctx.beginPath()\r\n        ctx.arc(pos.x, pos.y, 25 * scale, 0, Math.PI * 2)\r\n        ctx.fill()\r\n        ctx.fillStyle = \"#FFFFFF\"\r\n        ctx.font = `${Math.max(8, 9 * scale)}px sans-serif`\r\n        ctx.textAlign = \"center\"\r\n        ctx.textBaseline = \"middle\"\r\n        ctx.fillText(\"CT\", pos.x, pos.y)\r\n      } else if (node.type === \"crying-room\") {\r\n        ctx.fillStyle = \"#06B6D4\"\r\n        ctx.beginPath()\r\n        ctx.arc(pos.x, pos.y, 20 * scale, 0, Math.PI * 2)\r\n        ctx.fill()\r\n        ctx.fillStyle = \"#FFFFFF\"\r\n        ctx.font = `${Math.max(6, 7 * scale)}px sans-serif`\r\n        ctx.textAlign = \"center\"\r\n        ctx.textBaseline = \"middle\"\r\n        ctx.fillText(\"CRYING\", pos.x, pos.y - 4 * scale)\r\n        ctx.fillText(\"ROOM\", pos.x, pos.y + 4 * scale)\r\n      } else if (node.type === \"photo-exhibit\") {\r\n        ctx.fillStyle = \"#F59E0B\"\r\n        ctx.fillRect(pos.x - 30 * scale, pos.y - 20 * scale, 60 * scale, 40 * scale)\r\n        ctx.fillStyle = \"#FFFFFF\"\r\n        ctx.font = `${Math.max(7, 8 * scale)}px sans-serif`\r\n        ctx.textAlign = \"center\"\r\n        ctx.textBaseline = \"middle\"\r\n        ctx.fillText(\"PHOTO\", pos.x, pos.y)\r\n      } else if (node.type === \"edge-node\") {\r\n        return\r\n      } else if (node.type === \"custom\" || node.type === \"waypoint\" || node.type === \"intersection\") {\r\n        ctx.fillStyle = \"#8B5CF6\"\r\n        ctx.beginPath()\r\n        ctx.arc(pos.x, pos.y, 8 * scale, 0, Math.PI * 2)\r\n        ctx.fill()\r\n        if (node.label && node.type === \"custom\") {\r\n          ctx.fillStyle = \"#1F2937\"\r\n          ctx.font = `${Math.max(7, 8 * scale)}px sans-serif`\r\n          ctx.textAlign = \"center\"\r\n          ctx.fillText(node.label.substring(0, 8), pos.x, pos.y + 15 * scale)\r\n        }\r\n      } else if (node.type === \"entrance\") {\r\n        ctx.fillStyle = highlight ? \"#FBBF24\" : \"#10B981\"\r\n        ctx.beginPath()\r\n        ctx.arc(pos.x, pos.y, 12 * scale, 0, Math.PI * 2)\r\n        ctx.fill()\r\n        ctx.strokeStyle = \"#FFFFFF\"\r\n        ctx.lineWidth = 2\r\n        ctx.stroke()\r\n        ctx.fillStyle = \"#FFFFFF\"\r\n        ctx.font = `bold ${Math.max(8, 10 * scale)}px sans-serif`\r\n        ctx.textAlign = \"center\"\r\n        ctx.textBaseline = \"middle\"\r\n        ctx.fillText(\"E\", pos.x, pos.y)\r\n      } else if (node.type === \"table\" || node.type === \"vip-table\") {\r\n        const tableNum = node.label.match(/\\d+/)?.[0]\r\n        const isSelected =\r\n          tableNum === String(seatId) &&\r\n          ((isVip && node.type === \"vip-table\") || (!isVip && node.type === \"table\"))\r\n\r\n        ctx.fillStyle = node.type === \"vip-table\" ? \"#DC2626\" : \"#1E40AF\"\r\n        ctx.beginPath()\r\n        ctx.arc(pos.x, pos.y, 12 * scale, 0, Math.PI * 2)\r\n        ctx.fill()\r\n\r\n        if (isSelected) {\r\n          ctx.strokeStyle = \"#FBBF24\"\r\n          ctx.lineWidth = 4\r\n          ctx.beginPath()\r\n          ctx.arc(pos.x, pos.y, 18 * scale, 0, Math.PI * 2)\r\n          ctx.stroke()\r\n        }\r\n\r\n        ctx.fillStyle = \"#FFFFFF\"\r\n        ctx.font = `bold ${Math.max(8, 10 * scale)}px sans-serif`\r\n        ctx.textAlign = \"center\"\r\n        ctx.textBaseline = \"middle\"\r\n        ctx.fillText(tableNum || \"\", pos.x, pos.y)\r\n      }\r\n    }\r\n\r\n    venueNodes.forEach((node) => {\r\n      const tableNum = node.label.match(/\\d+/)?.[0]\r\n      const isSelected =\r\n        tableNum === String(seatId) &&\r\n        ((isVip && node.type === \"vip-table\") || (!isVip && node.type === \"table\"))\r\n      drawNode(node, isSelected)\r\n    })\r\n\r\n    ctx.restore()\r\n  }, [seatId, venueNodes, isVip, zoom, pan])\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card className=\"bg-white border-blue-200 p-6 md:p-8\">\r\n        <div className=\"flex items-center justify-center gap-3\">\r\n          <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\" />\r\n          <p className=\"text-slate-600 text-center text-sm md:text-base\">\r\n            Loading venue map...\r\n          </p>\r\n        </div>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  if (venueNodes.length === 0) {\r\n    return (\r\n      <Card className=\"bg-red-50 border-red-200 p-6 md:p-8\">\r\n        <div className=\"flex items-center gap-3 text-red-700\">\r\n          <AlertCircle className=\"w-5 h-5 md:w-6 md:h-6 flex-shrink-0\" />\r\n          <div>\r\n            <h3 className=\"font-semibold text-sm md:text-base\">Venue Map Not Configured</h3>\r\n            <p className=\"text-xs md:text-sm\">\r\n              Please set up the venue map in the admin panel first.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    )\r\n  }\r\n\r\n  const canvasProps = {\r\n    ref: canvasRef,\r\n    onPointerDown: handlePointerDown,\r\n    onPointerMove: handlePointerMove,\r\n    onPointerUp: handlePointerUp,\r\n    onPointerCancel: handlePointerCancel,\r\n    onPointerLeave: handlePointerUp,\r\n    onWheel: handleWheel,\r\n    onDoubleClick: handleDoubleClick,\r\n  } as const\r\n\r\n  return (\r\n    <>\r\n      {/* Fullscreen overlay */}\r\n      {isFullscreen && (\r\n        <div className=\"fixed inset-0 z-50 bg-white flex flex-col\">\r\n          <div className=\"flex items-center justify-between p-4 bg-slate-50 border-b border-slate-200\">\r\n            <h3 className=\"text-lg font-semibold text-slate-900\">\r\n              {isVip ? \"VIP \" : \"\"}Seat Number {seatId}\r\n            </h3>\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={toggleFullscreen}>\r\n              <Minimize2 className=\"w-5 h-5\" />\r\n            </Button>\r\n          </div>\r\n          <div ref={containerRef} className=\"relative flex-1 overflow-hidden bg-white\">\r\n            <canvas\r\n              {...canvasProps}\r\n              className=\"absolute inset-0 w-full h-full cursor-move touch-none\"\r\n            />\r\n          </div>\r\n          <div className=\"p-3 bg-slate-50 border-t border-slate-200 flex items-center justify-center gap-3\">\r\n            <Button variant=\"outline\" size=\"icon\" onClick={handleZoomOut}>\r\n              <ZoomOut className=\"w-4 h-4\" />\r\n            </Button>\r\n            <Button variant=\"outline\" size=\"icon\" onClick={handleResetView}>\r\n              1:1\r\n            </Button>\r\n            <Button variant=\"outline\" size=\"icon\" onClick={handleZoomIn}>\r\n              <ZoomIn className=\"w-4 h-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Normal (embedded) view */}\r\n      <Card className=\"bg-white border-slate-200 overflow-hidden shadow-sm\">\r\n        {error && (\r\n          <div className=\"p-3 md:p-4 bg-yellow-50 border-b border-yellow-200 flex items-center gap-2\">\r\n            <AlertCircle className=\"w-4 h-4 md:w-5 md:h-5 text-yellow-700 flex-shrink-0\" />\r\n            <p className=\"text-xs md:text-sm text-yellow-700\">{error}</p>\r\n          </div>\r\n        )}\r\n\r\n        {seatId && !error && (\r\n          <div className=\"p-3 md:p-4 bg-blue-50 border-b border-blue-200 flex items-center justify-between\">\r\n            <p className=\"text-xs md:text-sm text-slate-700 text-center leading-relaxed flex-1\">\r\n              <span className=\"font-semibold text-blue-700 text-base md:text-lg block md:inline mb-1 md:mb-0\">\r\n                {isVip ? \"VIP \" : \"\"}Seat Number {seatId}\r\n              </span>\r\n              <span className=\"block md:inline text-xs md:text-sm\">\r\n                {\" \"}\r\n                - Highlighted on the map below\r\n              </span>\r\n            </p>\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={toggleFullscreen} className=\"ml-2\">\r\n              <Maximize2 className=\"w-4 h-4 md:w-5 md:h-5\" />\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"w-full bg-white p-3 md:p-4\">\r\n          <div\r\n            ref={containerRef}\r\n            className=\"relative w-full h-[75vh] md:h-[550px] lg:h-[650px] max-w-full\"\r\n          >\r\n            <canvas\r\n              {...canvasProps}\r\n              className=\"absolute inset-0 w-full h-full cursor-move touch-none\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1759, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bernie%20Mar%20Malabunga/Documents/GitHub/seating-tracker/lib/firebase-service.ts"],"sourcesContent":["import { firestore, isFirebaseInitialized } from \"./firebase\"\r\nimport {\r\n  collection,\r\n  query,\r\n  where,\r\n  getDocs,\r\n  addDoc,\r\n  updateDoc,\r\n  deleteDoc,\r\n  doc,\r\n  writeBatch,\r\n  Timestamp,\r\n  getDoc,\r\n  orderBy,\r\n} from \"firebase/firestore\"\r\n\r\nexport interface Attendee {\r\n  id: string\r\n  ticketNumber: string\r\n  name: string\r\n  email: string\r\n  region: string\r\n  category: string\r\n  assignedSeat: number | null\r\n  table: number | null\r\n  tableCapacity?: number\r\n  checkedIn: boolean\r\n  checkedInTime: Date | null\r\n  createdAt: Date\r\n  updatedAt: Date\r\n}\r\n\r\nexport interface SeatInfo {\r\n  seatNumber: number\r\n  assignedTo: string | null\r\n  category: string\r\n  available: boolean\r\n  createdAt: Date\r\n  updatedAt: Date\r\n}\r\n\r\n// Helper to convert Firestore timestamps to JS dates\r\nfunction convertTimestamps(data: any): any {\r\n  const converted = { ...data }\r\n  Object.keys(converted).forEach((key) => {\r\n    if (converted[key]?.toDate) {\r\n      converted[key] = converted[key].toDate()\r\n    }\r\n  })\r\n  return converted\r\n}\r\n\r\nconst ensureFirebaseInitialized = () => {\r\n  if (!firestore) {\r\n    throw new Error(\r\n      \"Firebase is not initialized. Please configure Firebase environment variables in your Vercel project settings.\",\r\n    )\r\n  }\r\n}\r\n\r\n// Attendee operations\r\nexport async function getAttendees(): Promise<Attendee[]> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"), orderBy(\"createdAt\", \"desc\"))\r\n    const snapshot = await getDocs(q)\r\n    return snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...convertTimestamps(doc.data()),\r\n    })) as Attendee[]\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching attendees:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function searchAttendees(searchTerm: string): Promise<Attendee[]> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"))\r\n    const snapshot = await getDocs(q)\r\n    const allAttendees = snapshot.docs.map((doc) => ({\r\n      id: doc.id,\r\n      ...convertTimestamps(doc.data()),\r\n    })) as Attendee[]\r\n\r\n    const lowerSearch = searchTerm.toLowerCase()\r\n    return allAttendees.filter(\r\n      (att) => att.name.toLowerCase().includes(lowerSearch) || att.ticketNumber.toLowerCase().includes(lowerSearch),\r\n    )\r\n  } catch (error) {\r\n    console.error(\"[v0] Error searching attendees:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function getAttendeeByTicket(ticketNumber: string): Promise<Attendee | null> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"), where(\"ticketNumber\", \"==\", ticketNumber.toUpperCase()))\r\n    const snapshot = await getDocs(q)\r\n    if (snapshot.empty) return null\r\n\r\n    const doc = snapshot.docs[0]\r\n    return {\r\n      id: doc.id,\r\n      ...convertTimestamps(doc.data()),\r\n    } as Attendee\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching attendee by ticket:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function createAttendee(attendeeData: Omit<Attendee, \"id\" | \"createdAt\" | \"updatedAt\">): Promise<string> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const cleanData = Object.fromEntries(Object.entries(attendeeData).filter(([, value]) => value !== undefined))\r\n\r\n    const docRef = await addDoc(collection(firestore!, \"attendees\"), {\r\n      ...cleanData,\r\n      ticketNumber: cleanData.ticketNumber.toUpperCase(),\r\n      createdAt: Timestamp.now(),\r\n      updatedAt: Timestamp.now(),\r\n    })\r\n    return docRef.id\r\n  } catch (error) {\r\n    console.error(\"[v0] Error creating attendee:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function updateAttendee(id: string, updates: Partial<Omit<Attendee, \"id\" | \"createdAt\">>): Promise<void> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const docRef = doc(firestore!, \"attendees\", id)\r\n    await updateDoc(docRef, {\r\n      ...updates,\r\n      updatedAt: Timestamp.now(),\r\n    })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error updating attendee:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function deleteAttendee(id: string): Promise<void> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const docRef = doc(firestore!, \"attendees\", id)\r\n    await deleteDoc(docRef)\r\n  } catch (error) {\r\n    console.error(\"[v0] Error deleting attendee:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// Check-in operations\r\nexport async function checkInAttendee(id: string): Promise<void> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const docRef = doc(firestore!, \"attendees\", id)\r\n    await updateDoc(docRef, {\r\n      checkedIn: true,\r\n      checkedInTime: Timestamp.now(),\r\n      updatedAt: Timestamp.now(),\r\n    })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error checking in attendee:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function cancelCheckIn(id: string): Promise<void> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const docRef = doc(firestore!, \"attendees\", id)\r\n    await updateDoc(docRef, {\r\n      checkedIn: false,\r\n      checkedInTime: null,\r\n      updatedAt: Timestamp.now(),\r\n    })\r\n    console.log(\"[v0] Check-in cancelled successfully\")\r\n  } catch (error) {\r\n    console.error(\"[v0] Error cancelling check-in:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// Seat operations\r\nexport async function getSeatInfo(seatNumber: number): Promise<SeatInfo | null> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const docRef = doc(firestore!, \"seats\", String(seatNumber))\r\n    const snapshot = await getDoc(docRef)\r\n    if (!snapshot.exists()) return null\r\n\r\n    return {\r\n      seatNumber,\r\n      ...convertTimestamps(snapshot.data()),\r\n    } as SeatInfo\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching seat info:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// Table operations\r\nexport async function checkTableCapacity(\r\n  tableNumber: number,\r\n  isVIP: boolean,\r\n): Promise<{\r\n  current: number\r\n  max: number\r\n  available: number\r\n  isFull: boolean\r\n}> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"), where(\"assignedSeat\", \"==\", tableNumber))\r\n    const snapshot = await getDocs(q)\r\n\r\n    const maxCapacity = isVIP ? 30 : 10\r\n    const currentOccupancy = snapshot.size\r\n    const available = maxCapacity - currentOccupancy\r\n\r\n    return {\r\n      current: currentOccupancy,\r\n      max: maxCapacity,\r\n      available,\r\n      isFull: available <= 0,\r\n    }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error checking table capacity:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function assignSeatToAttendee(attendeeId: string, tableNumber: number, isVIP: boolean): Promise<void> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const capacity = await checkTableCapacity(tableNumber, isVIP)\r\n    if (capacity.isFull) {\r\n      throw new Error(`Table ${tableNumber} is at full capacity (${capacity.max}/${capacity.max} seats occupied)`)\r\n    }\r\n\r\n    const batch = writeBatch(firestore!)\r\n\r\n    const attendeeRef = doc(firestore!, \"attendees\", attendeeId)\r\n    batch.update(attendeeRef, {\r\n      table: tableNumber,\r\n      tableCapacity: isVIP ? 30 : 10,\r\n      updatedAt: Timestamp.now(),\r\n    })\r\n\r\n    await batch.commit()\r\n    console.log(`[v0] Assigned attendee to table ${tableNumber}. Capacity: ${capacity.current + 1}/${capacity.max}`)\r\n  } catch (error) {\r\n    console.error(\"[v0] Error assigning seat:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// Audit logging\r\nexport async function logAudit(\r\n  action: string,\r\n  performedBy: string,\r\n  targetTicketNumber: string,\r\n  seatNumber: number | null,\r\n  details: any,\r\n): Promise<void> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    await addDoc(collection(firestore!, \"auditLogs\"), {\r\n      action,\r\n      performedBy,\r\n      targetTicketNumber,\r\n      seatNumber,\r\n      details,\r\n      timestamp: Timestamp.now(),\r\n    })\r\n  } catch (error) {\r\n    console.error(\"[v0] Error logging audit:\", error)\r\n  }\r\n}\r\n\r\n// Batch import function for CSV attendees\r\nexport async function batchImportAttendees(\r\n  attendeesList: Array<{\r\n    ticketNumber: string\r\n    name: string\r\n    email: string\r\n    region: string\r\n    category: string\r\n    table?: number\r\n    seat?: number\r\n  }>,\r\n): Promise<{ successful: number; failed: number; errors: string[] }> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const batch = writeBatch(firestore!)\r\n    const errors: string[] = []\r\n    let successful = 0\r\n    let failed = 0\r\n\r\n    for (const attendee of attendeesList) {\r\n      try {\r\n        const docRef = doc(firestore!, \"attendees\", attendee.ticketNumber.toUpperCase())\r\n\r\n        batch.set(docRef, {\r\n          ticketNumber: attendee.ticketNumber.toUpperCase(),\r\n          name: attendee.name,\r\n          email: attendee.email,\r\n          region: attendee.region,\r\n          category: attendee.category,\r\n          table: attendee.table || null,\r\n          assignedSeat: attendee.seat || null,\r\n          checkedIn: false,\r\n          checkedInTime: null,\r\n          createdAt: Timestamp.now(),\r\n          updatedAt: Timestamp.now(),\r\n        })\r\n        successful++\r\n      } catch (err) {\r\n        failed++\r\n        errors.push(`Failed to import ${attendee.ticketNumber}: ${err}`)\r\n      }\r\n    }\r\n\r\n    await batch.commit()\r\n    return { successful, failed, errors }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error batch importing attendees:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\n// Analytics functions\r\nexport async function getCheckInStats(): Promise<{\r\n  totalAttendees: number\r\n  checkedIn: number\r\n  pending: number\r\n  checkInPercentage: number\r\n}> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"))\r\n    const snapshot = await getDocs(q)\r\n    const attendees = snapshot.docs.map((doc) => doc.data())\r\n\r\n    const totalAttendees = attendees.length\r\n    const checkedIn = attendees.filter((a: any) => a.checkedIn).length\r\n    const pending = totalAttendees - checkedIn\r\n    const checkInPercentage = totalAttendees > 0 ? Math.round((checkedIn / totalAttendees) * 100) : 0\r\n\r\n    return { totalAttendees, checkedIn, pending, checkInPercentage }\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching check-in stats:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function getRegionDistribution(): Promise<Record<string, number>> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"))\r\n    const snapshot = await getDocs(q)\r\n    const distribution: Record<string, number> = {\r\n      Luzon: 0,\r\n      Visayas: 0,\r\n      Mindanao: 0,\r\n      International: 0,\r\n    }\r\n\r\n    snapshot.docs.forEach((doc) => {\r\n      const region = doc.data().region\r\n      if (distribution.hasOwnProperty(region)) {\r\n        distribution[region]++\r\n      }\r\n    })\r\n\r\n    return distribution\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching region distribution:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function getCategoryDistribution(): Promise<Record<string, number>> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"))\r\n    const snapshot = await getDocs(q)\r\n    const distribution: Record<string, number> = {}\r\n\r\n    snapshot.docs.forEach((doc) => {\r\n      const category = doc.data().category\r\n      distribution[category] = (distribution[category] || 0) + 1\r\n    })\r\n\r\n    return distribution\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching category distribution:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport async function getNoShowsCount(): Promise<number> {\r\n  try {\r\n    ensureFirebaseInitialized()\r\n    const q = query(collection(firestore!, \"attendees\"), where(\"checkedIn\", \"==\", false))\r\n    const snapshot = await getDocs(q)\r\n    return snapshot.size\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching no-shows count:\", error)\r\n    throw error\r\n  }\r\n}\r\n\r\nexport { isFirebaseInitialized }\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Bernie%20Mar%20Malabunga/Documents/GitHub/seating-tracker/app/checkin/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Input } from \"@/components/ui/input\"\r\nimport { Search, CheckCircle2, ArrowLeft } from \"lucide-react\"\r\nimport Link from \"next/link\"\r\nimport { PathfindingVisualization } from \"@/components/pathfinding-visualization\"\r\nimport { searchAttendees, checkInAttendee, cancelCheckIn, logAudit, checkTableCapacity } from \"@/lib/firebase-service\"\r\nimport { useAuth } from \"@/lib/auth-context\"\r\nimport Image from 'next/image'\r\n\r\nexport default function CheckinPage() {\r\n  const { user } = useAuth()\r\n  const [searchInput, setSearchInput] = useState(\"\")\r\n  const [selectedAttendee, setSelectedAttendee] = useState<any>(null)\r\n  const [isSearching, setIsSearching] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  const handleSearch = async () => {\r\n    setIsSearching(true)\r\n    setError(null)\r\n    setSelectedAttendee(null)\r\n\r\n    try {\r\n      const results = await searchAttendees(searchInput)\r\n      if (results.length > 0) {\r\n        setSelectedAttendee(results[0])\r\n      } else {\r\n        setError(\"No attendee found with that search term.\")\r\n      }\r\n    } catch (err) {\r\n      console.error(\"[v0] Search failed:\", err)\r\n      setError(\"Failed to search attendees. Please try again.\")\r\n    } finally {\r\n      setIsSearching(false)\r\n    }\r\n  }\r\n\r\n  const handleCheckin = async () => {\r\n    if (!selectedAttendee) return\r\n\r\n    if (selectedAttendee.assignedSeat) {\r\n      try {\r\n        const isVIP = selectedAttendee.category === \"VIP\"\r\n        const capacity = await checkTableCapacity(selectedAttendee.assignedSeat, isVIP)\r\n\r\n        if (capacity.isFull) {\r\n          setError(\r\n            `Table ${selectedAttendee.assignedSeat} is at full capacity (${capacity.max}/${capacity.max} seats). Cannot check in.`,\r\n          )\r\n          return\r\n        }\r\n      } catch (err) {\r\n        console.error(\"[v0] Error checking capacity:\", err)\r\n        setError(\"Failed to check table capacity. Please try again.\")\r\n        return\r\n      }\r\n    }\r\n\r\n    try {\r\n      setIsSearching(true)\r\n      await checkInAttendee(selectedAttendee.id)\r\n      await logAudit(\"check_in\", user?.email || \"\", selectedAttendee.ticketNumber, selectedAttendee.assignedSeat, {\r\n        name: selectedAttendee.name,\r\n      })\r\n\r\n      setSelectedAttendee({ ...selectedAttendee, checkedIn: true })\r\n      setTimeout(() => {\r\n        setSearchInput(\"\")\r\n        setSelectedAttendee(null)\r\n      }, 2000)\r\n    } catch (err) {\r\n      console.error(\"[v0] Check-in failed:\", err)\r\n      setError(\"Failed to check in. Please try again.\")\r\n    } finally {\r\n      setIsSearching(false)\r\n    }\r\n  }\r\n\r\n  const handleCancelCheckIn = async () => {\r\n    if (!selectedAttendee || !confirm(\"Are you sure you want to cancel this check-in?\")) return\r\n\r\n    try {\r\n      setIsSearching(true)\r\n      setError(null)\r\n\r\n      await cancelCheckIn(selectedAttendee.id)\r\n      await logAudit(\r\n        \"cancel_check_in\",\r\n        user?.email || \"\",\r\n        selectedAttendee.ticketNumber,\r\n        selectedAttendee.assignedSeat,\r\n        {\r\n          name: selectedAttendee.name,\r\n        },\r\n      )\r\n\r\n      setSelectedAttendee({ ...selectedAttendee, checkedIn: false })\r\n    } catch (err) {\r\n      console.error(\"[v0] Error cancelling check-in:\", err)\r\n      setError(\"Failed to cancel check-in. Please try again.\")\r\n    } finally {\r\n      setIsSearching(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-[oklch(0.13_0.05_260)]\">\r\n      <header className=\"bg-[oklch(0.13_0.05_260)]\">\r\n        <div className=\"max-w-6xl mx-auto px-4 md:px-6 py-4 md:py-6\">\r\n          <div className=\"flex items-center justify-between gap-4\">\r\n            <div className=\"flex-1 min-w-0\">\r\n           <header className=\"bg-[oklch(0.13_0.05_260)]\">\r\n                   <div className=\"max-w-7xl mx-auto px-6 py-6 bg-[oklch(0.13_0.05_260)]\">\r\n                      <div className=\"flex flex-col items-center\">\r\n                           <Image\r\n                             src=\"/images/Logo__2_-removebg-preview.png\"\r\n                             width={100}\r\n                             height={100}\r\n                             alt=\"Picture of the author\"\r\n                           />\r\n           \r\n                           <Image\r\n                             src=\"/images/LGN__1_-removebg-preview.png\"\r\n                             width={400}\r\n                             height={400}\r\n                             alt=\"Picture of the author\"\r\n                           />\r\n           \r\n                           <Image\r\n                             src=\"/images/BTSL-removebg-preview.png\"\r\n                             width={400}\r\n                             height={400}\r\n                             alt=\"Picture of the author\"\r\n                           />\r\n                           \r\n                     </div>\r\n                   </div>\r\n                   \r\n                 </header>\r\n            </div>\r\n            <Link href=\"/\">\r\n              {/*<Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"border-blue-200 text-blue-600 hover:bg-blue-50 bg-transparent flex items-center gap-1 md:gap-2\"\r\n              >\r\n                <ArrowLeft className=\"w-4 h-4\" />\r\n                <span className=\"hidden sm:inline\">Back</span>\r\n              </Button>*/}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"max-w-6xl mx-auto px-4 md:px-6 py-6 md:py-12 space-y-6 md:space-y-8\">\r\n        {error && (\r\n          <Card className=\"bg-red-50 border-red-300 p-3 md:p-4\">\r\n            <p className=\"text-red-700 text-xs md:text-sm\">{error}</p>\r\n          </Card>\r\n        )}\r\n\r\n        <Card className=\"bg-white border-blue-200 p-4 md:p-8 shadow-sm\">\r\n          <h2 className=\"text-lg md:text-xl font-semibold text-slate-900 mb-4 md:mb-6\">Find My Seat</h2>\r\n          <div className=\"flex flex-col sm:flex-row gap-3\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 md:left-4 top-1/2 transform -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-slate-400\" />\r\n              <Input\r\n                placeholder=\"Enter ticket number or name...\"\r\n                value={searchInput}\r\n                onChange={(e) => setSearchInput(e.target.value)}\r\n                onKeyPress={(e) => e.key === \"Enter\" && handleSearch()}\r\n                className=\"pl-10 md:pl-12 bg-white border-blue-200 text-slate-900 placeholder:text-slate-400 h-11 md:h-12 text-base md:text-lg\"\r\n              />\r\n            </div>\r\n            <Button\r\n              onClick={handleSearch}\r\n              disabled={!searchInput || isSearching}\r\n              className=\"bg-[oklch(0.13_0.05_260)] text-white px-6 md:px-8 h-11 md:h-12 w-full sm:w-auto\"\r\n            >\r\n              {isSearching ? \"Searching...\" : \"Search\"}\r\n            </Button>\r\n          </div>\r\n        </Card>\r\n\r\n        {selectedAttendee && (\r\n          <Card className=\"bg-white border-blue-200 p-4 md:p-6 shadow-sm\">\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4 md:mb-6\">\r\n              <h2 className=\"text-base md:text-lg font-semibold text-slate-900 leading-tight\">\r\n                Venue Map\r\n              </h2>\r\n            <p className=\"text-xs md:text-sm text-slate-600 p-3 md:p-4 bg-blue-50 rounded-lg leading-relaxed\">\r\n              Your assigned seat is{\" \"}\r\n              <strong className=\"text-blue-700\">Seat {selectedAttendee.assignedSeat || \"Not Yet Assigned\"}</strong>.\r\n              Look for the highlighted table with the orange circle on the map above.\r\n            </p>\r\n              <div className=\"flex flex-col sm:flex-row gap-2 w-full sm:w-auto\">\r\n                {!selectedAttendee.checkedIn ? (\r\n                  <Button\r\n                    onClick={handleCheckin}\r\n                    disabled={isSearching}\r\n                    className=\"bg-emerald-600 hover:bg-emerald-700 text-white w-full sm:w-auto h-11\"\r\n                  >\r\n                    <CheckCircle2 className=\"w-4 h-4 mr-2\" />\r\n                    {isSearching ? \"Processing...\" : \"Mark as Checked In\"}\r\n                  </Button>\r\n                ) : (\r\n                  <>\r\n                    <div className=\"flex items-center justify-center gap-2 text-emerald-600 font-semibold py-2 bg-emerald-50 rounded-md sm:bg-transparent sm:py-0\">\r\n                      <CheckCircle2 className=\"w-5 h-5\" />\r\n                      <span className=\"text-sm md:text-base\">Checked In</span>\r\n                    </div>\r\n                    {/*<Button\r\n                      onClick={handleCancelCheckIn}\r\n                      disabled={isSearching}\r\n                      variant=\"outline\"\r\n                      className=\"border-red-300 text-red-600 hover:bg-red-50 bg-transparent w-full sm:w-auto h-11\"\r\n                    >\r\n                      {isSearching ? \"Processing...\" : \"Cancel Check-in\"}\r\n                    </Button>*/}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {selectedAttendee.assignedSeat && (\r\n              <div className=\"mb-4\">\r\n                <PathfindingVisualization\r\n                  seatId={selectedAttendee.assignedSeat}\r\n                  isVip={selectedAttendee.category === \"VIP\"}\r\n                  showBackground={false}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n\r\n          </Card>\r\n        )}\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}